"use strict";function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var instance=null,DynamicImages=function(){function e(t){return _classCallCheck(this,e),instance||((instance=this).options=_objectSpread({},e.defaults,t),this.init()),instance}return _createClass(e,[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.images=document.querySelectorAll("img[data-dynamic]");for(var t=0;t<this.images.length;t++)this.draw(this.images[t])}},{key:"draw",value:function(t){var e=parseInt(t.dataset.width),n=parseInt(t.dataset.height),i=t.dataset.background;e&&"number"==typeof e||(e=this.options.width),n&&"number"==typeof n||(n=this.options.height),i||(i=this.options.background),this.canvas.width=e,this.canvas.height=n,this.ctx.fillStyle=i,this.ctx.fillRect(0,0,e,n),this.ctx.font="40px Monospace",this.ctx.font=this.getFont(e,n),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.strokeText(this.getText(e,n),e/2,n/2),t.src=this.canvas.toDataURL(),this.reset()}},{key:"getFont",value:function(t,e){var n=40/this.options.width,i=t*n;return e/3<=1.2*i&&(i=t/2*n),(0|i)+"px Monospace"}},{key:"redraw",value:function(){this.init()}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"getText",value:function(t,e){return"".concat(t,"x").concat(e)}}],[{key:"log",value:function(t){console.log(t)}}]),e}();DynamicImages.defaults={width:150,height:150,background:"#ccc"};